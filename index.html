<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Performance Engine</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-3xl mx-auto p-6 mt-10 bg-white rounded-2xl shadow-lg">
    <h1 class="text-3xl font-semibold text-center mb-6">üìä AI Performance Engine</h1>

    <form id="rubricForm" class="space-y-4">
      <input type="file" id="fileInput" name="file" accept=".pdf,.docx" class="block w-full text-sm">
      <button type="submit" class="bg-blue-600 text-white px-5 py-2 rounded-md hover:bg-blue-700">
        Generate Rubric
      </button>
    </form>

    <p id="status" class="text-center mt-4"></p>
    <div id="rubricOutput" class="mt-6 hidden"></div>
  </div>

  <script>
    const backend = window.location.origin;
    document.getElementById("rubricForm").onsubmit = async (e) => {
      e.preventDefault();
      const file = document.getElementById("fileInput").files[0];
      if (!file) return alert("Please upload a file.");

      const formData = new FormData();
      formData.append("file", file);

      const res = await fetch(`${backend}/generate_rubric`, { method: "POST", body: formData });
      const data = await res.json();
      if (data.error) return alert("‚ùå " + data.error);

      document.getElementById("status").textContent = "‚úÖ Rubric Generated!";
      const container = document.getElementById("rubricOutput");
      container.innerHTML = `<pre class='bg-gray-50 p-4 rounded-md text-sm'>${JSON.stringify(data.rubric, null, 2)}</pre>`;
      container.classList.remove("hidden");
    };
  </script>
</body>
</html>
